プラレール　レール類設計データセット
熊谷正朗

０．はじめに

　この設計データはプラレールの特殊なポイントおよび高架橋線路を構成するための３次元設計データです。ふとしたきっかけ（忘れた；親戚からお下がりがたくさん届いて、子供らのレールレイアウトのバリエーションが増えたのが主因だと思う）から、突然試作を始めたものです。Twitterで関心を頂いたこと、および、形状構成の事例としての観点から、その設計データを公開することとしました。


１．本データの使用上の注意（ライセンス的）

・まず第一にプラレールは株式会社タカラトミーの登録商標であり、同社の製品です。それゆえ本データの使用の前提には、同社の制約があり、同社が禁じたことは禁じられます。
・本データはas isで提供するものであって、サポートは保障しません。
・本データの利用は、利用者の責任によるものとします。本データの利用に伴うトラブルは利用者で解決し、熊谷は関与しません（成形品の角によるけがや法的問題など）。
・本データの直接的な利用（プリンタによる成形出力）は個人の責任の範囲とし、個人、仲間内の範囲を超えての頒布（販売）は禁じます。ただし、タカラトミー社から正式になんらかの許可を得た場合などはその限りではなく、その場合は確認の連絡を下さい。
・本データのアイデア的な再利用（設計データや寸法を直接的には利用しない）については、利用者に一任します。引用などの明記も不要です。ただし、熊谷まで責任、問い合わせ等が及ばないものとします。
・本データの学修・教育的な利用についても、個人、あるいは学校・団体などの範囲で、利用の責任者が管理できる範囲で利用者に一任します。

※平たく言えば、「手元のデータを公開します。好きにしてかまいませんが、タカラトミー社と熊谷に迷惑が及ばないようにしてください」


２．データの説明
２．１　データの説明

・本設計データは Autodesk社の3DCAD Inventor 2021 Professional (教育向け)で設計されています。同ソフトをインストールしてあれば、そのまま開け、寸法調整、加工等ができると期待されます。2020以前は開けず、2022以降は変換時に一部ファイルの関係性が崩れる可能性があります。Fusion360ではインポートできるようですが、(関係は深いとはいえ)Inventorの機能を様々につかっているため、どの程度再現できるかは不明です。なお、Inventor(教育向け)は学校関係者は無償で利用できる場合があります。詳しくは同社サイトをご覧下さい。
・3Dプリンタ等用のSTLファイルが用意されている場合があります。これらは主に当方で出力することを念頭にしており、XYZプリンティング社 daVinci Super・ABS樹脂で出力を確認しています(成型誤差は0.1mm程度)。経験からすると、daVinci Pro 1.0でも同等の形状精度が得られると考えられますが、主にポイント類は長さが200mmを超えているため、斜めにおいても入らない場合があります。プリンタの成型精度の誤差については、以下のように調整用のパラメータがあります。
・レールの基本長 L=215mm および ジョイント部の寸法、レール断面形状は、家にあったレールから適宜実寸していますが、製品でも寸法にあるていどのばらつきがありました。調整する場合の調整箇所は後述します。
・出力例、組み立て例、設計の解説は
　　　https://togetter.com/li/1682126
　にまとめてあります。

２．２　設計方針とファイルの命名規則
・ある程度ファイルの共通性再利用性を考慮した構成。
・iPart, テーブルを利用した設計
・ファイル拡張子等
　　・ .ipt ：Inventorパーツファイル
　　・ .iam ：Inventorアセンブリファイル
　　・ .stl ：プリンタ用STLファイル
　　　　　　　基本的に、同名のiam(優先)もしくはiptファイルから出力
　　・ _C 　：アセンブリファイルの簡略化のためのシュリンクラップ、
　　　　　　　派生のファイル。
　　・ _S 　：プリント用のサポート材の設計ファイル
　　　　　　　（_Sと_Sなしをアセンブルする場合、_Sに本来の出力対象も
　　　　　　　　含んでいて、これをプリントすれば良い場合の両者がある）
　　・ _MIR ：ミラー（鏡像）の派生ファイル
　　・ printasm ：複数部品をまとめて印刷するためなどのアセンブリ
　　・ testprint, testasm：組み立て試験や印刷試験用のファイル
　　　　　　　　（たとえばポイントのバーの動作参考用、
　　　　　　　　　印刷する前のイメージ確認）
　　・ .ipt, .iam と同名のフォルダ：iPartなどの中間ファイル置き場
　　　　　　　Inventorで自動生成されるので直接は触らない
　　　　　　　（どこかのアセンブリなどで使ったときにテーブルで指定
　　　　　　　　したパラメータでインスタンスができる感じ）
　　・ .png ：参考までに形状を画像で保存したもの。
　　　　　　　_Table.png はiPartのテーブル（ファイル名と寸法の対応）

・基本形式
　　１．機能を得るための形状設計（ポイント形状等）
　　　　　※フォルダ名と同名の iptファイル
　　２．それを分割、ミラー
　　３．レールのジョイント部とともにアセンブル
　　４．継ぎ目消しのため、シュリンクラップして単一形状化
　　５．パーツによってはサポート材の設計追加
　　６．STL出力
　ので、STLファイルと同名のiam (なければipt)から順次、要素を
　たどるとわかりやすい。

・出力の想定
　　・FDM形式の３Ｄプリンタでの出力を想定して調整。
　　　　スライス0.2mm、線幅0.4mmで調整
　　・プリンタ側（スライサ側）のサポートは使用しないことを前提とし、
　　　必要なら設計側でサポート材も設計に入れる
　　　※サポート材の除去の手間など
　　　※部品の下部の斜め面はサポート不要にするため
　　・XYZPrinting社 daVinci superで検証。
　　　一部は daVinci Pro 1.0で出力。



３．現時点で含まれている設計

３．１　概要

・特殊長直線、特殊曲率カーブ
・片渡り、単線複線ポイント、Ｓ字カーブ
　および、高架橋側壁オプション
　　　※片渡りからの派生品
・ダブルクロス（シザースクロス）
　　　※複線レール幅、レール超
　　　※ななめに分岐する特殊形を含む
・引き上げ線ポイント
　　　※駅間隔で２：３の線路

・高架橋　橋脚
・単純スロープ（地上から橋脚１段分まで）
・ユニット式高架橋橋脚およびスロープユニット


３．２　説明

●基本ファイル
・root/PlaRails.ipj
　　Inventorのプロジェクトファイル
・root/GlobalParameter.ipt
　　設計全体に関わるパラメータを含む（後述）
　　多くの設計ファイルは直接的、間接的にこのファイルからパラメータ参照している。
・root/RailJoint(Male, Female)(_filled).ipt
　　連結部の形状のファイル。
　　カーブ以外の形状はこれを部品として組み込んで使用している。
　　レールは表面のみであるが、橋脚にはめ込む凹部構造が裏にあり、
　　サポート構造を合わせてプリントするので、あとでラジペンなどでむしる。
　　_filledはこの構造がなく、埋まっている。
・root/RailUnitBase.ipt
　　連結部の元ファイル。ここから一方を消して、上記連結形状になる。
　　そのため、修正するのであれば、このファイル。寸法はGlobalParameterで
　　規定しているものが多い。


●特殊長直線 StraightRail/
・StraightRail_i.iam, _C.ipt
　　連結部を引き延ばす方法で直線レールにしている。
　　iPart テーブルで寸法可変。
　　_i でテーブルを選んで、_CからSTLを出力。
　　M, Fはオスメス形状、数値は長さ。

●特殊曲線 CurveRail/
・CurveRail.ipt
　　表裏が欲しいために特殊な構造。
　　XYZPrintの「サポート：底辺」付けたときのブロック部がある。
　　iPartのテーブルで半径と中心角を指定できる。
　　STLファイルの寸法は、半径-中心角、215halfは215/2。

●ダブルクロス・シザースクロス　DoubleCross/
・はじまりのレール。
　それゆえ、設計は一番汚いので、整理された設計は 片渡りシリーズ Crossover参照
・ストレートなダブルクロスと、渡り線をそのまま直進する形式の
　ポイントを構成可能な派生品を組み合わせでつくる。

・DoubleCross.ipt
　ベースとなる設計。ここで線形をすべて決めている。
　直進型の1/4のパーツと、斜め型の1/4のパーツをiPartで生成している。
　※まず両者を含む形を作り、不要部をマスクして、マスクのオンオフで選択。
・DoubleCross_Straight.iam / _C.ipt
　一般的な複線の直進レール間のダブルクロス。
・DoubleCrossBar.ipt / _MIR.ipt / Pin.ipt / Bar_printasm.iam
　ポイントのトングにあたるバーの設計データ。
　左右はあるが、直進・斜めとも同じバーを使うように設計してある。
　Pinはバーの動作軸部品。
　printasmは使いそうな部品のまとめ印刷セット。
・DoubleCross_Rturn
　「仙台市地下鉄東西線八木山動物公園駅型ダブルクロス」
　駅のホームに行くところが斜め分岐。
　testasmに、特殊長直線・カーブとの組み合わせ図。
・DoubleCross_SymWiden
　Rturnを両側にして、かつ、特殊カーブと組み合わせて駅幅＝(1/2)Lにする例。
　※この設計法の特徴例示でプリント試作はしてない
・DoubleCross_DoubleSlant, DoubleCross_DoubleSlip
　どちらもダブルスリップ的形状。png参照。
　※この設計法の特徴例示でプリント試作はしてない

・DoubleCrossRail.iam / _C.ipt / TestAsm
　上記レール群の試作検討用。

・組み立て方：
　　Bar(_MIR)にBarPinを入れて、レール部分の穴に固定する。
　　使用ネジ：M2ナット、M2x8mmネジ
　　ネジを入れる前に、BarとPinが抵抗なく回るようにBarの穴を調整。
　　BarPinおよびレール側の穴をネジがスムーズに通る程度に調整。
　　※5mmリーマ加工／2mmリーマ加工

●片渡り クロスオーバー　シングルクロス　および高架化側壁　CrossOver/
・片渡りポイント
　および、このデータから派生した、単線複線ポイント　複線Ｓ字渡りカーブ
・レール設計としては最終で、設計方針は一番洗練されている。

・SingleCross.ipt
　基本の設計ファイル。形状はすべてここで規定。
　ベースとなるのは片渡りの半分を含む、単線複線型レール。

・SingleCross_PointHalf.ipt / _MIR.ipt
　SingleCrossのポイント側半分、およびそのミラー。
・SingleCross_CurveHalf.ipt / _MIR.ipt
　SingleCrossのカーブレール側半分、およびそのミラー。

・SingleCrossIA.iam / _C.ipt / _C_MIR.ipt
　PointHalf, CurveHalfを組み合わせて、iAssemblyによって
　　・片渡り、シングルクロス
　　・Ｓ字カーブ
　　・単線複線ポイント（ジョイントのオスメスで２種）
　をつくる。
　STLの生成には、まずSingleCrossIAのテーブルで一種を選択し、
　それを反映した _C.ipt もしくは _C_MIR.iptからSTLを出力する。
・SingleCrossBar.ipt / _MIR.ipt
　ポイントのトングに当たるバー。
　ピンはDoubleCrossなどのものを流用。

・SingleCrossIA_Cross(_MIR).stl
　片渡りポイント STL
・SingleCrossIA_Curve(_MIR).stl
　Ｓ字渡り STL
・SingleCrossIA_PointA(_MIR).stl
　単線複線ポイントA型 STL

・SingleCrossIA_MIR.iam
　IA.iamのミラーにあたるアセンブリ。STLはIA.iamだけでつくれるが、
　別のアセンブリに読み込みたい場合用。

・ポイントの組み立て方はDoubleCrossと同じ。

・RailVCoverST.ipt ST_S.ipt
　直線レールを高架橋レール相当にするための外付けオプション側壁。
　ST.iptが必要な形状を規定し、ST_S.iptではプリントするための
　自前設計のサポート材を含んだ形状。
　ST.iptのfxのLengthパラメータで全長が指定できる。
　　（標準はレール長－連結部長さ＝橋脚の幅、高架レールと同じ形状）
　はめ込んだ後、裏面のフックに必要なら適宜輪ゴムなど。

・RailVCoverCV.ipt CV_S.ipt
　同じく、単線複線ポイントのカーブ側の側壁。
　ポイントの凸部を収納する構造。
　※Ｓ字渡りにもそのまま使える。
　組み合わせ方はpointtestasm参照。

●引き上げ線ポイント PocketTrackPoint/
・PocketPoint_C.ipt、.stl
　　ポイントレール部分の最終形状。プリント用。
・PocketPoint.ipt
　　ポイントの機能形状部分を規定してあるパーツ。
　　寸法調整などはこのファイルで行う。
・PocketPointBar*.ipt
　　ポイントのトングにあたるバーの形状を規定。
　　BarPinはバーの回転軸にあたるピン
・pp_bar_printasm
　　バー類をまとめてプリントしやすくしたアセンブリ
・組み立て方：
　　BarにBarPinを入れて、レール部分の穴に固定する。
　　使用ネジ：M2ナット、M2x8mmネジ
　　ネジを入れる前に、BarとPinが抵抗なく回るようにBarの穴を調整。
　　BarPinおよびレール側の穴をネジがスムーズに通る程度に調整。
　　※5mmリーマ加工／2mmリーマ加工

●少しおしゃれな高架スロープセット SimpleSlope/
・ユニット式高架橋セットの前段階の試作品
・市販の高架橋直線レールを主に用い、それを乗せる短レール付きの
　橋脚部品の３点セット。
　この３個のセット＋高架直線レール２本の組でしか役に立たない。
・全体で直線レール 2+(3/4)の長さになる
・SlopeProfile.ipt
　　線路の側面の線形の設計。ラインは走行面を基準としている。
　　高架直線レールを斜めに使うことで、水平面内では短くなる(cosθ)
　　影響は、橋脚部品の長さで補填している。
　　基本的に、GlobalParameter由来の数値で設計。
・Slope_LowEnd.ipt / .iam / _C.ipt
　　床面→スロープとなる下部部品。
　　高架レールを接続するとわずかに、高架レールの側壁角が床に当たる。
・Slope_Middle.ipt / .iam / _C.ipt
　　中間部分。高さ的には高架の半分。
・Slope_HighEnd.ipt / .iam / _C.ipt
　　スロープ→水平となる上部部品。高さは高架１段分。
・Slope_testasm.iam
　　直線レールと組み合わせた組み立て図。


※試作品なので、オスメスは１方向のみ
※iamのRailJointMale/Femaleをコンポーネント変更すればよい

●高架橋脚 ViaductPillar/
・VDPillar_A, VDPillar_B, vppillar_printasm.stl
　　複線レール間隔にも対応した、高架レール向けの橋脚。橋脚に側壁が付いている。
・StandardPillarCover　　※iam, stlは４個まとめて印刷用
　　通常の橋脚に高架レールを乗せて出っ張った部分に、それらしいカバーを付ける。

●「大きな鉄橋」部品 TrussCC/
・思えば、もらってきた鉄橋でこの部品がないから、つくるか、とか
　思ったのがすべての始まりだった気がする。


